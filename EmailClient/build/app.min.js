angular.module("email-config",[]),angular.module("email-create",[]),angular.module("email-inbox",[]),angular.module("email-inbox").controller("InboxController",function($timeout,$scope,$state,$http){console.log("wywolanieinbox ctrl"),$scope.$parent.title="Odebrane",$scope.reload=$scope.$parent.reloadTime,$scope.emails=[],$scope.getData=function(){$http.get("/emails").success(function(data){$scope.emails=data,console.log($scope.emails)})},$scope.getData(),$scope.intervalFunction=function(){$timeout(function(){$scope.getData(),$scope.intervalFunction(),console.log("interwal co:"+$scope.reload)},$scope.reload)},$scope.intervalFunction()}),function(){angular.module("email-sent",[])}(),angular.module("email-view",[]),angular.module("email-view").controller("ViewController",function($stateParams,$scope,$http,$state){console.log("state:"+$stateParams.emailId),$scope.updateEmail=function(){$http.put("/emails/"+$stateParams.emailId,{read:!0}).success(function(data){$scope.udateEmailRes=data})},$scope.getEmail=function(){$http.get("/emails/"+$stateParams.emailId).success(function(data){$scope.mail=data,$scope.updateEmail(),$scope.getDateByTimestamp(data.received)})},$scope.deleteEmail=function(){$http["delete"]("/emails/"+$stateParams.emailId,{}).success(function(data){$scope.deleteEmailRes=data,$state.go("inbox")})},$scope.getDateByTimestamp=function(timeStamp){var date=new Date(timeStamp),months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];$scope.date=date.getDate()+" "+months[date.getMonth()]+" "+date.getFullYear()},$scope.getEmail()}),function(){var app=angular.module("emailApp",["ui.router","email-inbox","email-sent","email-view","email-create","email-config"]);app.controller("mainController",function($scope){$scope.title="Welcome",$scope.reloadTime=31e3}),app.config(function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/home"),$stateProvider.state("home",{url:"/home",templateUrl:"src/welcome.html"}).state("view",{url:"/view/:emailId",templateUrl:"src/ViewMail/view.html",controller:"ViewController"}).state("inbox",{url:"/inbox",templateUrl:"src/EmailList/Inbox/inbox.html",controller:"InboxController"}).state("sent",{url:"/sent",templateUrl:"src/EmailList/Sent/sent.html"}).state("create",{url:"/create",templateUrl:"src/NewMail/create.html"}).state("config",{url:"/config",templateUrl:"src/Configuration/config.html"})})}();