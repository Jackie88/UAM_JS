angular.module("email-config",[]),angular.module("email-config").controller("ConfigController",function($state,$scope){$scope.$parent.title="Config",$scope.change=function(int){1===int?($scope.appTitle.style.background="Red",$scope.li.style.background="Salmon",$state.go("config")):2===int?($scope.appTitle.style.background="Blue",$scope.li.style.background="Aqua",$state.go("config")):3===int&&($scope.appTitle.style.background="Green",$scope.li.style.background="PaleGreen",$state.go("config"))},$scope.refresh_time=function(){},$scope.change(),$scope.refresh_time()}),angular.module("email-create",[]),angular.module("email-create").controller("CreateController",function($state,$stateParams,$scope,$http){$scope.borders=!1,$scope.$parent.title="Napisz mail",$scope.mailValid=/^((\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*)\s*[,]{0,1}\s*)+$/,""!==$stateParams.emailId&&$http.get("/emails/"+$stateParams.emailId).success(function(data){console.log(data.title),$scope.mailTitle="Re: "+data.title,$scope.receivers=data.sender,$scope.content="\n\n\n"+data.sender+" napisał/a:\n\n"+data.content}),$scope.send=function(){$scope.borders=!0,$scope.NewMail.$valid&&($scope.adr=$scope.receivers.split(","),$http.post("/sent",{id:Date.now(),title:$scope.mailTitle,content:$scope.content,receivers:$scope.adr,sent:Date.now()}).success(function(data){$scope.createSentRes=data,$scope.reset(),$state.go("sent")}))},$scope.reset=function(){$scope.receivers="",$scope.mailTitle="",$scope.content="",$scope.borders=!1}}),angular.module("email-inbox",[]),angular.module("email-inbox").controller("InboxController",function($timeout,$scope,$state,$http){$scope.$parent.title="Odebrane",$scope.reload=$scope.$parent.reloadTime,$scope.emails=[],$scope.getData=function(){$http.get("/emails").success(function(data){$scope.emails=data})},$scope.deleteEmail=function(mailId){console.log("usuwam "+mailId),$http["delete"]("/emails/"+mailId,{}).success(function(){$scope.getData()})},$scope.getData(),$scope.intervalFunction=function(){$timeout(function(){$scope.getData(),$scope.intervalFunction()},$scope.reload)},$scope.intervalFunction()}),angular.module("email-sent",[]),angular.module("email-sent").controller("SentController",function($scope,$state,$http){$scope.$parent.title="Wysłane",$scope.emails=[],$scope.getData=function(){$http.get("/sent").success(function(data){$scope.emails=data,console.log(data)})},$scope.getDateByTimestamp=function(timeStamp){var date=new Date(timeStamp),months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return date.getDate()+" "+months[date.getMonth()]+" "+date.getFullYear()},$scope.getData()}),function(){var app=angular.module("email-view",[]);app.config(function($stateProvider){$stateProvider.state("respond",{url:"/create/:receviers/:title",controller:"RepsponController"})})}(),angular.module("email-view").controller("ViewController",function($stateParams,$scope,$http,$state){$scope.updateEmail=function(){$http.put("/emails/"+$stateParams.emailId,{read:!0}).success(function(data){$scope.udateEmailRes=data})},$scope.getEmail=function(){$http.get("/emails/"+$stateParams.emailId).success(function(data){$scope.mail=data,$scope.updateEmail(),$scope.getDateByTimestamp(data.received)})},$scope.deleteEmail=function(){$http["delete"]("/emails/"+$stateParams.emailId,{}).success(function(){$state.go("inbox")})},$scope.getDateByTimestamp=function(timeStamp){var date=new Date(timeStamp),months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];$scope.date=date.getDate()+" "+months[date.getMonth()]+" "+date.getFullYear()},$scope.getEmail()}),function(){var app=angular.module("emailApp",["ui.router","email-inbox","email-sent","email-view","email-create","email-config"]);app.controller("mainController",function($scope){$scope.title="Welcome",$scope.reloadTime=31e3}),app.config(function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/home"),$stateProvider.state("home",{url:"/home",templateUrl:"src/Welcome.html"}).state("view",{url:"/view/:emailId",templateUrl:"src/ViewMail/View.html",controller:"ViewController"}).state("inbox",{url:"/inbox",templateUrl:"src/EmailList/Inbox/Inbox.html",controller:"InboxController"}).state("sent",{url:"/sent",templateUrl:"src/EmailList/Sent/Sent.html",controller:"SentController"}).state("create",{url:"/create/:emailId",templateUrl:"src/Create/Create.html",controller:"CreateController"}).state("config",{url:"/config",templateUrl:"src/Configuration/Config.html",controller:"ConfigController"})})}();