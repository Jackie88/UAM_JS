/*! email-client 2015-02-17 */
window.addEventListener("DOMContentLoaded",function(){var a=new UAM.Store,b=new UAM.InputView(document.querySelector("#inputview")),c=new UAM.ListView(document.querySelector("#listview")),d=new UAM.FooterView(document.querySelector("footer"));new InputCtrl(b,a),new ListCtrl(c,a),new FooterCtrl(d,a)}),InputCtrl=function(a,b){this.addElement=function(a){b.add(a)},this.updateView=function(b){a.clear(b)},a.on("addElement",this.addElement),b.on("updateView",this.updateView)},UAM.InputView=function(){UAM.EventEmitter.call(this),this.textInput=document.querySelector("#input");var a=document.querySelector("#button");this.addElement=function(){text=this.textInput.value,text?this.emit("addElement",text):console.log("Nic nie wpisales")},this.clear=function(){text&&(this.textInput.value="")},a.addEventListener("click",this.addElement.bind(this))},UAM.utils.inherits(UAM.EventEmitter,UAM.InputView),ListCtrl=function(a,b){this.drawElement=function(b){a.drawElement(b)},this.updateView=function(a,c){b.update(a,c)},b.on("elementAdded",this.drawElement),a.on("updateView",this.updateView)},UAM.ListView=function(a){UAM.EventEmitter.call(this),this.list=a,this.drawElement=function(a){var b=document.createElement("li");b.innerHTML=a,b.className="listItem";var c=this;b.addEventListener("click",function(){c.changeState(b)}),this.list.appendChild(b),this.updateView(b,!0)},this.changeState=function(a){a.className="listItem"==a.className?"doneItem":"listItem",this.updateView(a,!1)},this.updateView=function(a,b){this.emit("updateView",a.className,b)}},UAM.utils.inherits(UAM.EventEmitter,UAM.ListView),FooterCtrl=function(a,b){this.updateData=function(b,c){a.updateCounter(b,c)},b.on("updateFooter",this.updateData)},UAM.FooterView=function(){UAM.EventEmitter.call(this),this.elementsCounter=document.querySelector("#all"),this.elementsDone=document.querySelector("#done"),this.elementsNotDone=document.querySelector("#notdone"),this.updateCounter=function(a,b){this.elementsCounter.innerHTML="Wszystkie : "+a,this.elementsDone.innerHTML="Zrobione : "+b,x=a-b,this.elementsNotDone.innerHTML="Nie zrobione : "+x}},UAM.utils.inherits(UAM.EventEmitter,UAM.FooterView);